<?xml version="1.0" encoding="UTF-8"?>

<deployment xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:jboss:bean-deployer bean-deployer_2_0.xsd"
    xmlns="urn:jboss:bean-deployer:2.0">

    <bean name="InitialContextFactory" class="org.jboss.naming.InitialContextFactoryBean">
        <property name="env">
            <map class="java.util.Properties" keyClass="java.lang.String" valueClass="java.lang.String">
                <entry>
                    <key>java.naming.factory.initial</key>
                    <value>org.jnp.interfaces.LocalOnlyContextFactory</value>
                </entry>
                <entry>
                    <key>java.naming.factory.url</key>
                    <value>org.jboss.naming:org.jnp.interfaces</value>
                </entry>
            </map>
        </property>
        <depends>testInjectedSecurityManager</depends>
    </bean>
    <bean name="JndiBindings" class="org.jboss.naming.BindingsInitializer">
        <property name="ctx">
            <inject bean="InitialContextFactory" property="ctx"/>
        </property>
        <property name="bindings">
            <map keyClass="java.lang.String">
                <entry>
                    <key>ints/1</key>
                    <value class="java.lang.Integer">1</value>
                </entry>
                <entry>
                    <key>strings/1</key>
                    <value class="java.lang.String">String1</value>
                </entry>
                <entry>
                    <key>bigint/1</key>
                    <value class="java.math.BigInteger">123456789</value>
                </entry>
                <entry>
                    <key>env-props</key>
                    <value>
                        <map class="java.util.Properties" keyClass="java.lang.String" valueClass="java.lang.String">
                            <entry>
                                <key>java.naming.factory.initial</key>
                                <value>org.jnp.interfaces.LocalOnlyContextFactory</value>
                            </entry>
                            <entry>
                                <key>java.naming.factory.url</key>
                                <value>org.jboss.naming:org.jnp.interfaces</value>
                            </entry>
                        </map>
                    </value>
                </entry>
            </map>
        </property>
    </bean>

    <bean name="QueueSecurityManager" class="org.jnp.test.support.QueueSecurityManager">
        
    </bean>

    <bean name="testInjectedSecurityManager" class="org.jnp.server.NamingBeanImpl">
        <!-- Install this bean as the global JVM NamingServer -->
        <property name="installGlobalService">true</property>
        <property name="useGlobalService">false</property>
        <!-- Set the SecurityManager to use -->
        <property name="securityMgr"><inject bean="QueueSecurityManager"/></property>
    </bean>
</deployment>
